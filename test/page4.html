<!DOCTYPE html>
<html>
  <head>
    <title>page4.html</title>
    <script src="../js/caboche.js"></script>
  <head>
  <body>
    <h1>hello</h1>
    <p>many script blocks</p>

    <script>
      function log(text) {
        var e = document.createElement('p');
        e.appendChild(document.createTextNode(text));
        document.body.appendChild(e);
      };
    </script>

    <p>script 0 done</p>

    <script>
      Caboche.last(function() {
        try {
          Fat.ty;
          log("success!");
        } catch(ex) {
          log("fail!")
        }
      });
    </script>

    <p>script 1 done</p>

    <script>
      Caboche.phase(0, 'fat.js?_' + Math.random())
      Caboche.phase(1, 'b.js')

      Caboche.last(function() { log('over.') });
    </script>

    <p>script 2 done</p>
  </body>
</html>

